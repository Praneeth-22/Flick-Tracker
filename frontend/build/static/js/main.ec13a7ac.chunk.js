(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports={logo:"Header_logo__3EvUy","navbar-links":"Header_navbar-links__cDMhn",active:"Header_active__11YnJ",li:"Header_li__1wmkz","toggle-navbar-btn":"Header_toggle-navbar-btn__3QsXm",bar:"Header_bar__36k6Q"}},,,,function(e,t,a){e.exports={MovieDetails:"MovieDetail_MovieDetails__1KmSo","movie-details":"MovieDetail_movie-details__3hqAR","movie-img":"MovieDetail_movie-img__3vH_Q","movie-overview":"MovieDetail_movie-overview__2z4v0",UserLists:"MovieDetail_UserLists__3XpQt",AddMovieToListButton:"MovieDetail_AddMovieToListButton__25fkL"}},,function(e,t,a){e.exports={Login:"Login_Login__X--Ow",title:"Login_title__2YdZd",LoginForm:"Login_LoginForm__1vY4z"}},function(e,t,a){e.exports={CreateListArea:"Profile_CreateListArea__3_ej9",AddListForm:"Profile_AddListForm__2lfV0",DisplayListArea:"Profile_DisplayListArea__1jDOw",Lists:"Profile_Lists__1st8C",ListName:"Profile_ListName__3fSP7"}},,function(e,t,a){e.exports={Registration:"Registration_Registration__-wOs0",title:"Registration_title__1SDkQ",RegistrationForm:"Registration_RegistrationForm__2jL2o"}},,function(e,t,a){e.exports={Movie:"Movie_Movie__1NAv9","movie-title":"Movie_movie-title__21Ynk","movie-img":"Movie_movie-img__3CxSk"}},,,,function(e,t,a){e.exports={SearchArea:"SearchArea_SearchArea__3hxID",SearchForm:"SearchArea_SearchForm__29gus"}},function(e,t,a){e.exports={DeleteButton:"DetailList_DeleteButton__CZrk_"}},,,,,function(e,t,a){e.exports={MoviesList:"MoviesList_MoviesList__jUrqC"}},function(e,t,a){e.exports=a(41)},,,,,function(e,t,a){},,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(27),r=a.n(i),s=(a(35),a(3)),l=a(4),c=a(6),m=a(5),u=a(7),d=a(1),h=a(8),v=a.n(h),g=o.a.createContext(),p=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={close:!0},e.toggleNavBarBtn=function(){e.setState((function(e){return{close:!e.close}}))},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){var e=this.context;this.token=e.getTokenFromCookieHandler,null!==this.token&&e.changeLoggedInStatusHandler}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"render",value:function(){var e=this.context,t=e.state.isLoggedIn,a=[v.a["navbar-links"]];return!0!==this.state.close&&a.push(v.a.active),o.a.createElement("header",null,o.a.createElement("div",{className:v.a.logo},"FlickTracker"),o.a.createElement("nav",{className:v.a.navbar},o.a.createElement("div",{className:v.a["toggle-navbar-btn"],onClick:this.toggleNavBarBtn.bind(this)},o.a.createElement("span",{className:v.a.bar}),o.a.createElement("span",{className:v.a.bar}),o.a.createElement("span",{className:v.a.bar})),t?o.a.createElement("ul",{className:a.join(" "),onClick:this.toggleNavBarBtn.bind(this)},o.a.createElement(u.b,{to:"/",className:v.a.li},o.a.createElement("li",null,"home")),o.a.createElement(u.b,{to:"/profile",className:v.a.li},o.a.createElement("li",null,"profile")),o.a.createElement(u.b,{to:"/login",className:v.a.li,onClick:e.deleteTokenFromCookieHandler},o.a.createElement("li",null,"logout"))):o.a.createElement("ul",{className:a.join(" "),onClick:this.toggleNavBarBtn.bind(this)},o.a.createElement(u.b,{to:"/",className:v.a.li},o.a.createElement("li",null,"home")),o.a.createElement(u.b,{to:"/register",className:v.a.li},o.a.createElement("li",null,"register")),o.a.createElement(u.b,{to:"/login",className:v.a.li},o.a.createElement("li",null,"login")))))}}]),a}(o.a.Component);p.contextType=g;var f=p,L=a(18),E=a(23),_=a.n(E),b=a(19),y=a.n(b),k=function(e){return o.a.createElement("div",{className:y.a.Movie},o.a.createElement("div",{className:y.a["movie-img"]},null===e.movie.poster_path?null:o.a.createElement("img",{src:"https://image.tmdb.org/t/p/w300".concat(e.movie.poster_path),alt:""})),o.a.createElement(u.b,{to:"/movie/".concat(e.movie.id),className:y.a["movie-title"],onClick:function(){return e.updateNextMovieIdHandler(e.movie.id)}},o.a.createElement("p",null,e.movie.title)))},S=a(29),N=a.n(S),H=function(e){return o.a.createElement("div",{className:N.a.MoviesList},e.moviesList.map((function(t){return o.a.createElement(k,{key:t.id,movie:t,updateNextMovieIdHandler:e.updateNextMovieIdHandler})})))},M=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={searchTerm:"",searchedForSomeMovie:!1,moviesList:[],isLoading:!1},e.movieInputChangeHandler=function(t){e.setState({searchTerm:t.target.value})},e.movieInputSubmitHandler=function(t){t.preventDefault(),e.setState({searchedForSomeMovie:!0,isLoading:!0});fetch("https://api.themoviedb.org/3/search/movie?api_key=".concat("02440f17263c2fbe3f7ebc2f282780af","&query=").concat(e.state.searchTerm)).then((function(e){return e.json()})).then((function(t){var a=t.results;a=(a=a.sort((function(e,t){return t.popularity-e.popularity}))).filter((function(e){return null!==e.poster_path&&!e.adult})),e.setState({moviesList:Object(L.a)(a),isLoading:!1})})).catch((function(t){console.error("Error: ",t),e.setState({isLoading:!1})}))},e.updateNextMovieIdHandler=function(e){},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.isLoading,t=this.state.searchedForSomeMovie,a=this.state.moviesList;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:_.a.SearchArea},o.a.createElement("h3",null,"Search for the Movies to Track"),o.a.createElement("form",{className:_.a.SearchForm,action:"",onSubmit:this.movieInputSubmitHandler},o.a.createElement("input",{type:"text",placeholder:"Search Movies...",onChange:this.movieInputChangeHandler}),o.a.createElement("button",{value:"Submit"},"Search"))),e?o.a.createElement("div",{className:"loader"},"Loading..."):0===a.length&&t?o.a.createElement("p",null,"Sorry! No flicks are present with that name. Make sure that flick name is correct"):o.a.createElement(H,{moviesList:this.state.moviesList,updateNextMovieIdHandler:this.updateNextMovieIdHandler}))}}]),a}(o.a.Component),x=a(12),j=a.n(x),C=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={movie:null,nextMovieID:null,recommendedMoviesList:[],isLoading:!1},e.apiKey="02440f17263c2fbe3f7ebc2f282780af",e.getMovieDetailsHandler=function(t){e.setState({isLoading:!0}),fetch("https://api.themoviedb.org/3/movie/".concat(t,"?api_key=").concat(e.apiKey)).then((function(e){return e.json()})).then((function(t){e.setState({movie:t,isLoading:!1})})).catch((function(e){console.error("Error: ",e)}))},e.getRecommendedMoviesHandler=function(t){fetch("https://api.themoviedb.org/3/movie/".concat(t,"/recommendations?api_key=").concat(e.apiKey)).then((function(e){return e.json()})).then((function(t){e.setState({recommendedMoviesList:Object(L.a)(t.results)})})).catch((function(e){console.error("Error: ",e)}))},e.addMovieToMyListHandler=function(t){var a=e.context.getTokenFromCookieHandler(),n={movie_id:e.state.movie.id,movie_title:e.state.movie.title};fetch("/api/my-lists/".concat(t,"/movie/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){console.error(e)}))},e.updateNextMovieIdHandler=function(t){e.getMovieDetailsHandler(t),e.getRecommendedMoviesHandler(t),window.scrollTo(0,0)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id,t=this.context;this.getMovieDetailsHandler(e),this.getRecommendedMoviesHandler(e),t.getMyListsHandler()}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"render",value:function(){var e=this,t=this.context,a=this.state.isLoading,n=this.state.movie;return a?o.a.createElement("div",{className:"loader"},"Loading..."):null!=n?o.a.createElement("div",{className:j.a.MovieDetails},o.a.createElement("div",{className:"movie-title"},o.a.createElement("h1",null,n.title)),o.a.createElement("div",{className:j.a["movie-details"]},o.a.createElement("div",{className:j.a["movie-img"]},null===n.poster_path?null:o.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500".concat(n.poster_path),alt:""})),o.a.createElement("div",{className:j.a["movie-overview"]},o.a.createElement("h2",null,"Overview"),o.a.createElement("p",null,n.overview))),t.state.isLoggedIn?o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"Add this movie to your List"),o.a.createElement("div",{className:j.a.UserLists},t.state.userLists.map((function(t){return o.a.createElement("button",{className:j.a.AddMovieToListButton,key:t.id,onClick:function(){return e.addMovieToMyListHandler(t.id)}},t.list_name)})))):null,o.a.createElement("div",{className:j.a["movie-recommender"]},o.a.createElement("h1",null,"Recommended Movies"),o.a.createElement(H,{moviesList:this.state.recommendedMoviesList,updateNextMovieIdHandler:this.updateNextMovieIdHandler}))):null}}]),a}(o.a.Component);C.contextType=g;var D=C,O=a(17),w=a.n(O),T=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={message:null,isLoading:!1},e.submitUserCredentialsHandler=function(t){t.preventDefault(),e.setState({isLoading:!0});var a=e.context,n=new FormData(t.target),o={};n.forEach((function(e,t){o[t]=e})),fetch("/api/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(t){var n=t.body;201===t.status?(document.cookie=n.token,a.changeLoggedInStatusHandler()):e.setState({message:n.message}),e.setState({isLoading:!1})})).catch((function(t){console.error(t),e.setState({message:"Something went wrong with our server. Please try again later at some other time"}),e.setState({isLoading:!1})}))},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"render",value:function(){var e=this.state.message,t=this.state.isLoading;return this.context.state.isLoggedIn?o.a.createElement(d.a,{to:"/profile"}):t?o.a.createElement("div",{className:"loader"},"Loading..."):o.a.createElement("div",{className:w.a.Registration},o.a.createElement("h1",{className:w.a.title},"Registration"),null!==e?o.a.createElement("h4",{className:w.a.message},e):null,o.a.createElement("form",{className:w.a.RegistrationForm,onSubmit:this.submitUserCredentialsHandler},o.a.createElement("input",{type:"text",name:"first_name",placeholder:"First Name",required:!0}),o.a.createElement("input",{type:"text",name:"last_name",placeholder:"Last Name"}),o.a.createElement("input",{type:"email",name:"email",placeholder:"Email",required:!0}),o.a.createElement("input",{type:"password",name:"password",placeholder:"Password",required:!0}),o.a.createElement("button",{type:"submit"},"Register")))}}]),a}(o.a.Component);T.contextType=g;var A=T,I=a(14),F=a.n(I),B=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={message:null,isLoading:!1},e.submitUserCredentialsHandler=function(t){t.preventDefault(),e.setState({isLoading:!0});var a=e.context,n=new FormData(t.target),o={};n.forEach((function(e,t){o[t]=e})),fetch("/api/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(t){var n=t.body;200===t.status?(document.cookie=n.token,a.changeLoggedInStatusHandler()):e.setState({message:n.message}),e.setState({isLoading:!1})})).catch((function(t){console.error(t),e.setState({message:"Something went wrong with our server. Please try again later at some other time"}),e.setState({isLoading:!1})}))},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"render",value:function(){var e=this.state.message,t=this.state.isLoading;return this.context.state.isLoggedIn?o.a.createElement(d.a,{to:"/profile"}):t?o.a.createElement("div",{className:"loader"},"Loading..."):o.a.createElement("div",{className:F.a.Login},o.a.createElement("h1",{className:F.a.title},"Login"),null!==e?o.a.createElement("h4",{className:F.a.message},e):null,o.a.createElement("h4",{className:F.a.message},this.props.location.message),o.a.createElement("form",{className:F.a.LoginForm,onSubmit:this.submitUserCredentialsHandler},o.a.createElement("input",{type:"email",name:"email",placeholder:"Email",required:!0}),o.a.createElement("input",{type:"password",name:"password",placeholder:"Password",required:!0}),o.a.createElement("button",{type:"submit"},"Login")))}}]),a}(o.a.Component);B.contextType=g;var R=B,U=a(15),P=a.n(U),q=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isLoading:!1},e.createListHandler=function(t){t.preventDefault(),e.setState({isLoading:!0});var a=e.context,n=a.getTokenFromCookieHandler(),o=new FormData(t.target);t.target.reset();var i={};o.forEach((function(e,t){i[t]=e})),fetch("/api/my-lists/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(t){a.getMyListsHandler(),e.setState({isLoading:!1})})).catch((function(t){console.error(t),e.setState({isLoading:!1})}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.context.getMyListsHandler()}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"render",value:function(){var e=this.context,t=this.state.isLoading;return e.state.isLoggedIn?t?o.a.createElement("div",{className:"loader"},"Loading..."):o.a.createElement("div",null,o.a.createElement("div",{className:P.a.CreateListArea},o.a.createElement("h2",null,"Create a list"),o.a.createElement("form",{className:P.a.AddListForm,onSubmit:this.createListHandler},o.a.createElement("input",{type:"text",name:"list_name",placeholder:"Name of the list...",required:!0}),o.a.createElement("button",{type:"submit"},"Add"))),o.a.createElement("div",{className:P.a.DisplayListArea},o.a.createElement("h2",null,"Your lists"),o.a.createElement("div",{className:P.a.Lists},0===e.state.userLists.length?o.a.createElement("p",null,"Your have no lists..."):e.state.userLists.map((function(e){return o.a.createElement(u.b,{style:{textDecoration:"none"},key:e.id,to:"/list/".concat(e.id)},o.a.createElement("p",{className:P.a.ListName},e.list_name))}))))):o.a.createElement(d.a,{to:{pathname:"/login",message:"You are not logged in!"}})}}]),a}(o.a.Component);q.contextType=g;var z=q,W=a(24),Y=a.n(W),J=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={shouldRedirectAfterSuccessfulDelete:!1,isLoading:!1,currentListID:null,movies:[]},e.getListDetailsHandler=function(t){var a=e.context;e.setState({isLoading:!0});var n=a.getTokenFromCookieHandler();fetch("/api/my-lists/".concat(t,"/"),{method:"GET",headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()})).then((function(t){e.setState({movies:t}),e.setState({isLoading:!1})})).catch((function(t){console.log("Error: ",t),e.setState({isLoading:!1})}))},e.deleteListHandler=function(t){t.preventDefault(),e.setState({isLoading:!0});var a=e.context.getTokenFromCookieHandler(),n=e.state.currentListID;fetch("http://localhost:5000/api/my-lists/".concat(n,"/"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(){e.setState({shouldRedirectAfterSuccessfulDelete:!e.state.shouldRedirectAfterSuccessfulDelete}),e.setState({isLoading:!1})})).catch((function(t){console.log("Error:",t),e.setState({isLoading:!1})}))},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.setState({currentListID:e}),this.getListDetailsHandler(e)}},{key:"render",value:function(){var e=this.context,t=this.state.isLoading,a=this.state.shouldRedirectAfterSuccessfulDelete;return e.state.isLoggedIn?t?o.a.createElement("div",{className:"loader"},"Loading..."):a?o.a.createElement(d.a,{to:"/profile"}):o.a.createElement("div",null,o.a.createElement("button",{className:Y.a.DeleteButton,onClick:this.deleteListHandler},"Delete this list"),o.a.createElement("div",{className:Y.a.MoviesList},this.state.movies.map((function(e){return o.a.createElement("h4",{key:e.movie_id},e.movie_title)})))):o.a.createElement(d.a,{to:{pathname:"/login",message:"You are not logged in!"}})}}]),a}(o.a.Component);J.contextType=g;var Q=J,K=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isLoggedIn:!1,userLists:[]},e.changeLoggedInStatusHandler=function(){e.setState((function(e){return{isLoggedIn:!e.isLoggedIn}}))},e.getTokenFromCookieHandler=function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var a=e[t].split("=");if("token"===a[0].trim())return decodeURIComponent(a[1])}return null},e.deleteTokenFromCookieHandler=function(){document.cookie="token=; max-age=0",e.changeLoggedInStatusHandler()},e.getMyListsHandler=function(){var t=e.getTokenFromCookieHandler();fetch("/api/my-lists/",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(t){e.setState({userLists:t})})).catch((function(e){console.error(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement(g.Provider,{value:{state:this.state,changeLoggedInStatusHandler:this.changeLoggedInStatusHandler,getTokenFromCookieHandler:this.getTokenFromCookieHandler,deleteTokenFromCookieHandler:this.deleteTokenFromCookieHandler,getMyListsHandler:this.getMyListsHandler}},o.a.createElement(u.a,null,o.a.createElement(f,null),o.a.createElement(d.d,null,o.a.createElement(d.b,{path:"/",component:M,exact:!0}),o.a.createElement(d.b,{path:"/movie/:id",component:D,exact:!0}),o.a.createElement(d.b,{path:"/register",component:A,exact:!0}),o.a.createElement(d.b,{path:"/login",component:R,exact:!0}),o.a.createElement(d.b,{path:"/profile",component:z,exact:!0}),o.a.createElement(d.b,{path:"/list/:id",component:Q,exact:!0}))))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[30,1,2]]]);
//# sourceMappingURL=main.ec13a7ac.chunk.js.map